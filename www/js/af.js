!function(a){"use strict";var b=[],c=function(b){return b.afCSS3AnimateId||(b.afCSS3AnimateId=a.uuid()),b.afCSS3AnimateId},d=function(b){return"string"==typeof b||b instanceof String?document.getElementById(b):a.is$(b)?b[0]:b},e=function(a,e){var f,g,h=d(a);return g=c(h),b[g]?(b[g].animate(e),f=b[g]):(f=i(h,e),b[g]=f),f};a.fn.css3Animate=function(a){!a.complete&&a.callback&&(a.complete=a.callback);var b=e(this[0],a);a.complete=null,a.sucess=null,a.failure=null;for(var c=1;c<this.length;c++)b.link(this[c],a);return b},a.css3AnimateQueue=function(){return new i.queue};var f=a.feat.cssTransformStart,g=a.feat.cssTransformEnd,h=a.feat.cssPrefix.replace(/-/g,"")+"TransitionEnd";h=a.os.fennec||""===a.feat.cssPrefix||a.os.ie?"transitionend":h,h=h.replace(h.charAt(0),h.charAt(0).toLowerCase());var i=function(){var c=function(d,e){if(!(this instanceof c))return new c(d,e);if(this.callbacksStack=[],this.activeEvent=null,this.countStack=0,this.isActive=!1,this.el=d,this.linkFinishedProxy=a.proxy(this.linkFinished,this),this.el){this.animate(e);var f=this;af(this.el).bind("destroy",function(){var a=f.el.afCSS3AnimateId;f.callbacksStack=[],b[a]&&delete b[a]})}};return c.prototype={animate:function(b){if(this.isActive&&this.cancel(),this.isActive=!0,!b)return void window.alert("Please provide configuration options for animation of "+this.el.id);var c,d,e=!!b.addClass,i=numOnly(b.time);if(e)b.removeClass?af(this.el).replaceClass(b.removeClass,b.addClass):af(this.el).addClass(b.addClass);else{if(0===i&&(b.time=0),b.y||(b.y=0),b.x||(b.x=0),b.previous){var j=new a.getCssMatrix(this.el);b.y+=numOnly(j.f),b.x+=numOnly(j.e)}b.origin||(b.origin="0% 0%"),b.scale||(b.scale="1"),b.rotateY||(b.rotateY="0"),b.rotateX||(b.rotateX="0"),b.skewY||(b.skewY="0"),b.skewX||(b.skewX="0"),b.timingFunction||(b.timingFunction="linear"),("number"==typeof b.x||-1===b.x.indexOf("%")&&-1===b.x.toLowerCase().indexOf("px")&&-1===b.x.toLowerCase().indexOf("deg"))&&(b.x=parseInt(b.x,10)+"px"),("number"==typeof b.y||-1===b.y.indexOf("%")&&-1===b.y.toLowerCase().indexOf("px")&&-1===b.y.toLowerCase().indexOf("deg"))&&(b.y=parseInt(b.y,10)+"px");var k="translate"+f+b.x+","+b.y+g+" scale("+parseFloat(b.scale)+") rotate("+b.rotateX+")";a.os.opera||(k+=" rotateY("+b.rotateY+")"),k+=" skew("+b.skewX+","+b.skewY+")",this.el.style[a.feat.cssPrefix+"Transform"]=k,this.el.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden";var l=a.feat.cssPrefix+"Transform";void 0!==b.opacity&&(this.el.style.opacity=b.opacity,l+=", opacity"),b.width&&(this.el.style.width=b.width,l="all"),b.height&&(this.el.style.height=b.height,l="all"),this.el.style[a.feat.cssPrefix+"TransitionProperty"]="all",-1===(""+b.time).indexOf("s")?(c="ms",d=b.time+c):-1!==b.time.indexOf("ms")?(c="ms",d=b.time):(c="s",d=b.time+c),b.delay&&(this.el.style[a.feat.cssPrefix+"TransitionDelay"]=b.delay),this.el.style[a.feat.cssPrefix+"TransitionDuration"]=d,this.el.style[a.feat.cssPrefix+"TransitionTimingFunction"]=b.timingFunction,this.el.style[a.feat.cssPrefix+"TransformOrigin"]=b.origin}this.callbacksStack.push({complete:b.complete,success:b.success,failure:b.failure}),this.countStack++;var m,n=this,o=window.getComputedStyle(this.el);e&&(m=o[a.feat.cssPrefix+"TransitionDuration"],i=numOnly(m),b.time=i,-1!==m.indexOf("ms")?c="ms":(c="s",b.time*=1e3)),0===i||"ms"===c&&5>i||"none"===o.display?a.asap(a.proxy(this.finishAnimation,this,[!1])):(this.activeEvent=function(a){clearTimeout(n.timeout),n.finishAnimation(a),n.el.removeEventListener(h,n.activeEvent,!1)},n.timeout=setTimeout(this.activeEvent,numOnly(b.time)+50),this.el.addEventListener(h,this.activeEvent,!1))},addCallbackHook:function(a){return a&&this.callbacksStack.push(a),this.countStack++,this.linkFinishedProxy},linkFinished:function(a){a?this.cancel():this.finishAnimation()},finishAnimation:function(a){a&&a.preventDefault&&a.preventDefault(),this.isActive&&(this.countStack--,0===this.countStack&&this.fireCallbacks(!1))},fireCallbacks:function(a){this.clearEvents();var b=this.callbacksStack;this.cleanup();for(var c=0;c<b.length;c++){var d=b[c].complete,e=b[c].success,f=b[c].failure;"function"==typeof d&&d(a),a&&"function"==typeof f?f():"function"==typeof e&&e()}},cancel:function(){this.isActive&&this.fireCallbacks(!0)},cleanup:function(){this.callbacksStack=[],this.isActive=!1,this.countStack=0},clearEvents:function(){this.activeEvent&&this.el.removeEventListener(h,this.activeEvent,!1),this.activeEvent=null},link:function(a,b){var c={complete:b.complete,success:b.success,failure:b.failure};return b.complete=this.addCallbackHook(c),b.success=null,b.failure=null,e(a,b),b.complete=c.complete,b.success=c.success,b.failure=c.failure,this}},c}();i.queue=function(){return{elements:[],push:function(a){this.elements.push(a)},pop:function(){return this.elements.pop()},run:function(){var a=this;if(0!==this.elements.length){if("function"==typeof this.elements[0]){var b=this.shift();b()}if(0!==this.elements.length){var c=this.shift();this.elements.length>0&&(c.complete=function(b){b||a.run()}),i(document.getElementById(c.id),c)}}},shift:function(){return this.elements.shift()}}}}(af),Date.now||(Date.now=function(){"use strict";return(new Date).getTime()}),function(){"use strict";for(var a=["webkit","moz","ms"],b=0;b<a.length&&!window.requestAnimationFrame;++b){var c=a[b];window.requestAnimationFrame=window[c+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var d=0;window.requestAnimationFrame=function(a){var b=Date.now(),c=Math.max(d+16,b);return setTimeout(function(){a(d=c)},c-b)},window.cancelAnimationFrame=clearTimeout}}(),function(a){"use strict";var b=[],c=function(b){return b.afAnimateId||(b.afAnimateId=a.uuid()),b.afAnimateId},d=function(b){return"string"==typeof b||b instanceof String?document.getElementById(b):a.is$(b)?b[0]:b},e=function(a,e){var g,h,i=d(a);return h=c(i),b[h]?(e&&b[h].animate(e),g=b[h]):(g=f(i,e),b[h]=g),g};a.fn.animate=function(a){var b=e(this[0],a);return b};var f=function(a,c){if(!(this instanceof f))return new f(a,c);if(this.el=a,this.el){c&&this.animate(c);var d=this;af(this.el).bind("destroy",function(){var a=d.el.afAnimateId;b[a]&&delete b[a]})}};f.prototype={animationTimer:null,isAnimating:!1,startX:0,startY:0,runTime:0,endX:0,endY:0,currX:0,currY:0,animationStartTime:0,pauseTime:0,completeCB:null,easingFn:"linear",animateOpts:{},updateCb:null,animate:function(b){var c=this;c.isAnimating||(c.isAnimating=!0,window.cancelAnimationFrame(c.animationTimer),b||(b={x:0,y:0,duration:0}),this.easingFn=b.easing||"linear",this.completeCB=b.complete||null,this.updateCB=b.update||null,this.runTime=numOnly(b.duration),b.complete&&delete b.complete,this.animateOpts=b,this.startTime=Date.now(),this.startMatrix=a.getCssMatrix(this.el),0===this.runTime&&this.doAnimate())},start:function(){this.doAnimate()},doAnimate:function(){var a,b,c,d=Date.now(),e=this;return 0===this.runTime||d>=this.startTime+this.runTime?(e.setPosition(this.animateOpts.x,this.animateOpts.y),e.isAnimating=!1,this.updateCB&&this.updateCB({x:this.animateOpts.x,y:this.animateOpts.y}),void(this.completeCB&&this.completeCB())):(d=(d-this.startTime)/this.runTime,d=d>1?1:d,c=g[this.easingFn](d),a=(this.animateOpts.x-this.startMatrix.e)*c+this.startMatrix.e,b=(this.animateOpts.y-this.startMatrix.f)*c+this.startMatrix.f,this.setPosition(a,b),this.updateCB&&this.updateCB({x:a,y:b}),void(this.isAnimating&&(this.animationTimer=window.requestAnimationFrame(function(){e.doAnimate()}))))},setPosition:function(b,c){this.el.style[a.feat.cssPrefix+"Transform"]="matrix3d( 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+b+", "+c+", 0, 1 )",this.currX=b,this.currY=c},stop:function(){this.isAnimating=!1,window.cancelAnimationFrame(this.animationTimer),this.pauseTime=Date.now()-this.startTime},resume:function(){this.isAnimating=!0,this.startTime=Date.now()-this.pauseTime,this.doAnimate()}};var g={linear:function(a){return a},easeOutSine:function(a){return Math.sin(a*Math.PI/2)}}}(af),function(a){"use strict";function b(a){return e[a].el?!0:(delete e[a],!1)}function c(){if(a.os.android&&!a.os.chrome&&a.os.webkit){var c=!1;a.bind(a.touchLayer,["cancel-enter-edit","exit-edit"],function(){if(c){c=!1;for(var a in e)b(a)&&e[a].androidFormsMode&&e[a].stopFormsMode()}})}g=!0}var d=325,e=[],f=function(b){return b.afScrollerId||(b.afScrollerId=a.uuid()),b.afScrollerId};a.fn.scroller=function(b){for(var c,d,g=0;g<this.length;g++)d=f(this[g]),e[d]?c=e[d]:(b||(b={}),a.feat.nativeTouchScroll||(b.useJsScroll=!0),c=h(this[g],b),e[d]=c);return 1===this.length?c:this};var g=!1,h=function(){function b(b,c){var d=document.createElement("div");return d.style.position="absolute",d.style.width=b+"px",d.style.height=c+"px",d.style[a.feat.cssPrefix+"BorderRadius"]="2px",d.style.borderRadius="2px",d.style.display="none",d.className="scrollBar",d.style.background="black",d}var f,h,i=function(b,d){var e;if(!g&&a.touchLayer&&a.isObject(a.touchLayer)?c():a.touchLayer&&a.isObject(a.touchLayer)||(a.touchLayer={}),e="string"==typeof b||b instanceof String?document.getElementById(b):b,!e)return void window.alert("Could not find element for scroller "+b);var i=a(e);return d.hasParent&&(i=i.parent()),i.hasClass("x-scroll")&&(d.horizontalScroll=!0),i.hasClass("y-scroll")&&(d.verticalScroll=!0),a.os.desktop?new j(e,d):d.useJsScroll?new f(e,d):new h(e,d)},j=function(b,c){this.el=b,this.afEl=a(this.el);for(var d in c)this[d]=c[d]};return j.prototype={refresh:!1,refreshContent:"Pull to Refresh",refreshHangTimeout:2e3,refreshHeight:60,refreshElement:null,refreshCancelCB:null,refreshRunning:!1,scrollTop:0,scrollLeft:0,preventHideRefresh:!0,verticalScroll:!0,horizontalScroll:!1,refreshTriggered:!1,moved:!1,eventsActive:!1,rememberEventsActive:!1,scrollingLocked:!1,autoEnable:!0,blockFormsFix:!1,loggedPcentY:0,loggedPcentX:0,infinite:!1,infiniteEndCheck:!1,infiniteTriggered:!1,scrollSkip:!1,scrollTopInterval:null,scrollLeftInterval:null,bubbles:!0,lockBounce:!1,initScrollProgress:!1,_scrollTo:function(a,b){if(b=parseInt(b,10),0===b||isNaN(b))return this.el.scrollTop=Math.abs(a.y),void(this.el.scrollLeft=Math.abs(a.x));var c=10,d=(this.el.scrollTop-a.y)/Math.ceil(b/c),e=(this.el.scrollLeft-a.x)/Math.ceil(b/c),f=this,g=Math.ceil(this.el.scrollTop-a.y)/d,h=Math.ceil(this.el.scrollLeft-a.x)/d,i=0,j=0;f.scrollTopInterval=window.setInterval(function(){f.el.scrollTop-=d,j++,j>=g&&(f.el.scrollTop=a.y,clearInterval(f.scrollTopInterval))},c),f.scrollLeftInterval=window.setInterval(function(){f.el.scrollLeft-=e,i++,i>=h&&(f.el.scrollLeft=a.x,clearInterval(f.scrollLeftInterval))},c)},enable:function(){},disable:function(){},hideScrollbars:function(){},addPullToRefresh:function(){},_scrollToTop:function(a){this._scrollTo({x:0,y:0},a)},_scrollToBottom:function(a){this._scrollTo({x:0,y:this.el.scrollHeight-this.el.offsetHeight},a)},scrollToBottom:function(a){return this._scrollToBottom(a)},scrollToTop:function(a){return this._scrollToTop(a)},init:function(b,c){this.el=b,this.afEl=a(this.el),this.defaultProperties();for(var d in c)this[d]=c[d];var f=this,g=function(){!f.eventsActive||a.feat.nativeTouchScroll||a.ui&&a.ui.activeDiv!==f.container||f.adjustScroll()};this.afEl.bind("destroy",function(){f.disable(!0);var b=f.el.afScrollerId;e[b]&&delete e[b],a.unbind(a.touchLayer,"orientationchange-reshape",g)}),a.bind(a.touchLayer,"orientationchange-reshape",g),a(window).bind("resize",g)},needsFormsFix:function(b){return this.useJsScroll&&this.isEnabled()&&"none"!==this.el.style.display&&a(b).closest(this.afEl).size()>0},handleEvent:function(a){if(!this.scrollingLocked)switch(a.type){case"touchstart":clearInterval(this.scrollTopInterval),this.preventHideRefresh=!this.refreshRunning,this.moved=!1,this.onTouchStart(a),this.bubbles||a.stopPropagation();break;case"touchmove":this.onTouchMove(a),this.bubbles||a.stopPropagation();break;case"touchend":this.onTouchEnd(a),this.bubbles||a.stopPropagation();break;case"scroll":this.onScroll(a)}},coreAddPullToRefresh:function(b){b&&(this.refreshElement=b);var c;if(null===this.refreshElement){var d=document.getElementById(this.container.id+"_pulldown");c=a(null!==d?d:"<div id='"+this.container.id+"_pulldown' class='afscroll_refresh' style='position:relative;height:60px;text-align:center;line-height:60px;font-weight:bold;'>"+this.refreshContent+"</div>")}else c=a(this.refreshElement);var e=c.get(0);this.refreshContainer=a("<div style='overflow:hidden;height:0;width:100%;display:none;background:inherit;-webkit-backface-visibility: hidden !important;'></div>"),a(this.el).prepend(this.refreshContainer.prepend(e)),this.refreshContainer=this.refreshContainer[0]},fireRefreshRelease:function(b){if(this.refresh&&b){this.setRefreshContent("Refreshing...");var c=a.trigger(this,"refresh-release",[b])!==!1;if(this.preventHideRefresh=!1,this.refreshRunning=!0,c){var d=this;this.refreshHangTimeout>0&&(this.refreshCancelCB=setTimeout(function(){d.hideRefresh()},this.refreshHangTimeout))}}},setRefreshContent:function(b){a(this.container).find(".afscroll_refresh").html(b)},lock:function(){this.scrollingLocked||(this.scrollingLocked=!0,this.rememberEventsActive=this.eventsActive,this.eventsActive&&this.disable())},unlock:function(){this.scrollingLocked&&(this.scrollingLocked=!1,this.rememberEventsActive&&this.enable())},scrollToItem:function(b,c){a.is$(b)||(b=a(b));var d,e,f,g;"bottom"===c?(e=b.offset(),d=e.top-this.afEl.offset().bottom+e.height,d+=4):(g=b.offset().top,d=g-document.body.scrollTop,f=this.afEl.offset().top,document.body.scrollTop<f&&(d-=f),d-=4),this.scrollBy({y:d,x:0},0)},setPaddings:function(b,c){var d=a(this.el),e=numOnly(d.css("paddingTop"));d.css("paddingTop",b+"px").css("paddingBottom",c+"px"),this.scrollBy({y:b-e,x:0})},divide:function(a,b){return 0!==b?a/b:0},isEnabled:function(){return this.eventsActive},addInfinite:function(){this.infinite=!0},clearInfinite:function(){this.infiniteTriggered=!1,this.scrollSkip=!0},scrollTo:function(a,b){return this._scrollTo(a,b)},updateP2rHackPosition:function(){}},f=function(c,d){if(this.init(c,d),d.hasParent)this.container=this.el.parentNode;else{var e=a.create("div",{});e.append(a(this.el).contents()),a(this.el).append(e),this.container=this.el,this.el=e.get(0)}this.container.afScrollerId=c.afScrollerId,this.afEl=a(this.container),"hidden"!==this.container.style.overflow&&(this.container.style.overflow="hidden"),this.addPullToRefresh(null,!0),d.autoEnable&&(this.autoEnable=d.autoEnable),this.autoEnable&&this.enable(!0);var f;this.verticalScroll&&this.verticalScroll===!0&&this.scrollBars===!0&&(f=b(5,20),f.style.top="0px",this.vScrollCSS&&(f.className=this.vScrollCSS),f.style.display="none",this.container.appendChild(f),this.vscrollBar=f,f=null),this.horizontalScroll&&this.horizontalScroll===!0&&this.scrollBars===!0&&(f=b(20,5),f.style.bottom="0px",this.hScrollCSS&&(f.className=this.hScrollCSS),f.style.display="none",this.container.appendChild(f),this.hscrollBar=f,f=null),this.horizontalScroll&&(this.el.style.cssFloat="left"),this.el.hasScroller=!0},h=function(b,c){c.nativeParent&&(b=b.parentNode),this.init(b,c);var d=a(b);if(c.replaceParent===!0){var e=d.parent();d.css("height",e.height()).css("width",e.width()),d.insertBefore(d.parent()),e.remove()}this.container=this.el,d.css("-webkit-overflow-scrolling","touch"),c.autoEnable&&(this.autoEnable=c.autoEnable),this.autoEnable&&this.enable()},h.prototype=new j,f.prototype=new j,h.prototype.defaultProperties=function(){this.refreshContainer=null,this.dY=this.cY=0,this.dX=this.cX=0,this.cancelPropagation=!1,this.loggedPcentY=0,this.loggedPcentX=0,this.xReset=0,this.yReset=0;var a=this;this.adjustScrollOverflowProxy=function(){a.afEl.css("overflow","auto"),a.afEl.parent().css("overflow","hidden")}},h.prototype.enable=function(a){this.eventsActive||(this.eventsActive=!0,this.el.style.overflow="auto",a||this.adjustScroll(),this.el.addEventListener("touchstart",this,!1),this.el.addEventListener("scroll",this,!1),this.updateP2rHackPosition())},h.prototype.disable=function(b){this.eventsActive&&(this.logPos(this.el.scrollLeft,this.el.scrollTop),b||a.ui||(this.el.style.overflow="hidden"),this.el.removeEventListener("touchstart",this,!1),this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.el.removeEventListener("scroll",this,!1),this.eventsActive=!1)},h.prototype.addPullToRefresh=function(a,b){b||(this.refresh=!0),this.refresh&&this.refresh===!0&&(this.coreAddPullToRefresh(a),this.refreshContainer.style.position="absolute",this.refreshContainer.style.top="-60px",this.refreshContainer.style.height="60px",this.refreshContainer.style.display="block",this.updateP2rHackPosition())},h.prototype.updateP2rHackPosition=function(){if(!this.refresh)return a(this.el).find(".p2rhack").remove();var b=a(this.el).find(".p2rhack");0===b.length&&(a(this.el).append("<div class='p2rhack' style='position:absolute;width:1px;height:1px;opacity:0;background:transparent;z-index:-1;-webkit-transform:translate3d(-1px,0,0);'></div>"),b=a(this.el).find(".p2rhack")),b.css("top",this.el.scrollHeight+this.refreshHeight+1+"px")},h.prototype.onTouchStart=function(a){this.lastScrollInfo={top:0},this.xReset=this.yReset=0,this.verticalScroll&&(0===this.el.scrollTop&&this.refresh&&(this.el.scrollTop=1,this.yReset=-1),this.el.scrollTop===this.el.scrollHeight-this.el.clientHeight&&this.infinite&&(this.el.scrollTop-=1,this.yReset=1)),this.horizontalScroll&&(0===this.el.scrollLeft&&(this.el.scrollLeft=1,this.xReset=-1),this.el.scrollLeft===this.el.scrollWidth-this.el.clientWidth&&(this.el.scrollLeft-=1,this.xReset=1)),this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.refresh&&this.el.addEventListener("touchend",this,!1),this.el.addEventListener("touchmove",this,!1),this.dY=a.touches[0].pageY,this.dX=a.touches[0].pageX,this.startTop=this.el.scrollTop,this.startLeft=this.el.scrollLeft,(this.refresh||this.infinite)&&this.refresh&&this.dY<0&&this.showRefresh()},h.prototype.onTouchMove=function(b){var c=b.touches[0].pageY-this.dY,d=b.touches[0].pageX-this.dX,e=this.el.scrollHeight-this.el.scrollTop===this.el.clientHeight&&0>c,f=this.el.scrollWidth-this.el.scrollLeft===this.el.clientWidth&&0>d,g="input"!==b.target.tagName.toLowerCase();this.verticalScroll&&0===this.startTop&&0===this.el.scrollTop&&c>0&&g&&b.preventDefault(),this.horizontalScroll&&0===this.startTop&&0===this.el.scrollLeft&&d>0&&g&&b.preventDefault(),this.verticalScroll&&e&&g&&b.preventDefault(),this.horizontalScroll&&f&&g&&b.preventDefault(),this.moved||(a.trigger(this,"scrollstart",[this.el,{x:d,y:c}]),a.trigger(a.touchLayer,"scrollstart",[this.el,{x:d,y:c}]),this.refresh||this.el.addEventListener("touchend",this,!1),this.moved=!0),this.horizontalScroll&&Math.abs(c)>Math.abs(d)&&b.preventDefault(),this.refresh&&this.el.scrollTop<-this.refreshHeight?this.showRefresh():this.refresh&&this.refreshTriggered&&this.refreshRunning&&this.el.scrollTop>this.refreshHeight?(this.refreshTriggered=!1,this.refreshRunning=!1,this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.hideRefresh(!1),this.setRefreshContent("Pull to Refresh"),a.trigger(this,"refresh-cancel")):this.refresh&&this.refreshTriggered&&!this.refreshRunning&&this.el.scrollTop>-this.refreshHeight&&(this.refreshTriggered=!1,this.refreshRunning=!1,this.refreshCancelCB&&clearTimeout(this.refreshCancelCB),this.hideRefresh(!1),this.setRefreshContent("Pull to Refresh"),a.trigger(this,"refresh-cancel")),this.cY=c,this.cX=d,this.lastScrollInfo.top=this.cY,this.initScrollProgress&&(a.trigger(this,"scroll",[{x:-this.el.scrollLeft,y:-this.el.scrollTop}]),a.trigger(a.touchLayer,"scroll",[{x:-this.el.scrollLeft,y:-this.el.scrollTop}]))},h.prototype.showRefresh=function(){this.refreshTriggered||(this.refreshTriggered=!0,this.setRefreshContent("Release to Refresh"),a.trigger(this,"refresh-trigger"))},h.prototype.onTouchEnd=function(){var b=this.el.scrollTop<=-this.refreshHeight,c=this;if(this.fireRefreshRelease(b,!0),this.moved||(this.el.scrollTop+=this.yReset,this.el.scrollLeft+=this.xReset),b&&this.refresh){var d=a.create("<div style='height:"+this.el.clientHeight+this.refreshHeight+"px;width:1px;-webkit-transform:translated3d(-1px,0,0)'></div>");a(this.el).append(d),c.refreshContainer.style.top="0px",c.refreshContainer.style.position="",setTimeout(function(){d.remove()})}this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.infiniteEndCheck=!0,this.infinite&&!this.infiniteTriggered&&this.el.scrollTop>=this.el.scrollHeight-this.el.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0),this.touchEndFired=!0;var e=200,f=this,g={top:this.el.scrollTop,left:this.el.scrollLeft},h=0;clearInterval(f.nativePolling),f.nativePolling=setInterval(function(){return h++,h===parseInt(e/8,10)&&f.initScrollProgress&&(a.trigger(f,"scroll",[{x:-f.el.scrollLeft+f.cX,y:-f.el.scrollTop+f.cY}]),a.trigger(a.touchLayer,"scroll",[{x:-f.el.scrollLeft+f.cX,y:-f.el.scrollTop+f.cY}])),h>=e?(clearInterval(f.nativePolling),void(f.initScrollProgress&&(a.trigger(f,"scroll",[{x:-f.el.scrollLeft,y:-f.el.scrollTop}]),a.trigger(a.touchLayer,"scroll",[{x:-f.el.scrollLeft,y:-f.el.scrollTop}])))):void((f.el.scrollTop!==g.top||f.el.scrollLeft!==g.left)&&(clearInterval(f.nativePolling),a.trigger(a.touchLayer,"scrollend",[f.el]),a.trigger(f,"scrollend",[f.el]),f.initScrollProgress&&(a.trigger(f,"scroll",[{x:-f.el.scrollLeft,y:-f.el.scrollTop}]),a.trigger(a.touchLayer,"scroll",[{x:-f.el.scrollLeft,y:-f.el.scrollTop}]))))},20)},h.prototype.hideRefresh=function(b){if(!this.preventHideRefresh){var c=this,e=function(b){c.refreshContainer.style.top="-60px",c.refreshContainer.style.position="absolute",c.dY=c.cY=0,b||(c.el.style[a.feat.cssPrefix+"Transform"]="none",c.el.style[a.feat.cssPrefix+"TransitionProperty"]="none",c.el.scrollTop=0,c.logPos(c.el.scrollLeft,0),c.refreshRunning=!1,c.setRefreshContent("Pull to Refresh"),a.trigger(c,"refresh-finish"))};b!==!1&&c.afEl.css3Animate?c.afEl.css3Animate({y:c.el.scrollTop-c.refreshHeight+"px",x:"0%",time:d+"ms",complete:e}):e(),this.refreshTriggered=!1}},h.prototype.hideScrollbars=function(){},h.prototype.scrollTo=function(a,b){return this.logPos(a.x,a.y),a.x*=-1,a.y*=-1,this._scrollTo(a,b)},h.prototype.scrollBy=function(a,b){return a.x+=this.el.scrollLeft,a.y+=this.el.scrollTop,this.logPos(this.el.scrollLeft,this.el.scrollTop),this._scrollTo(a,b)},h.prototype.scrollToBottom=function(a){this._scrollToBottom(a),this.logPos(this.el.scrollLeft,this.el.scrollTop)},h.prototype.onScroll=function(){if(this.infinite&&this.touchEndFired)return void(this.touchEndFired=!1);if(this.scrollSkip)return void(this.scrollSkip=!1);this.infinite&&!this.infiniteTriggered&&this.el.scrollTop>=this.el.scrollHeight-this.el.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"),this.infiniteEndCheck=!0);var b=this;this.infinite&&this.infiniteEndCheck&&this.infiniteTriggered&&(this.infiniteEndCheck=!1,a.trigger(b,"infinite-scroll-end"))},h.prototype.logPos=function(a,b){this.loggedPcentX=this.divide(a,this.el.scrollWidth),this.loggedPcentY=this.divide(b,this.el.scrollHeight),this.scrollLeft=a,this.scrollTop=b,isNaN(this.loggedPcentX)&&(this.loggedPcentX=0),isNaN(this.loggedPcentY)&&(this.loggedPcentY=0)},h.prototype.adjustScroll=function(){this.adjustScrollOverflowProxy(),this.el.scrollLeft=this.loggedPcentX*this.el.scrollWidth,this.el.scrollTop=this.loggedPcentY*this.el.scrollHeight,this.logPos(this.el.scrollLeft,this.el.scrollTop)},f.prototype.defaultProperties=function(){this.boolScrollLock=!1,this.currentScrollingObject=null,this.elementInfo=null,this.verticalScroll=!0,this.horizontalScroll=!1,this.scrollBars=!0,this.vscrollBar=null,this.hscrollBar=null,this.hScrollCSS="scrollBar",this.vScrollCSS="scrollBar",this.firstEventInfo=null,this.moved=!1,this.preventPullToRefresh=!0,this.isScrolling=!1,this.androidFormsMode=!1,this.refreshSafeKeep=!1,this.lastScrollbar="",this.finishScrollingObject=null,this.container=null,this.scrollingFinishCB=null,this.loggedPcentY=0,this.loggedPcentX=0,this.androidPerfHack=0},f.prototype.enable=function(a){this.eventsActive||(this.eventsActive=!0,a?this.scrollerMoveCSS({x:0,y:0},0):this.adjustScroll(),this.container.addEventListener("touchstart",this,!1),this.container.addEventListener("touchmove",this,!1),this.container.addEventListener("touchend",this,!1))},f.prototype.adjustScroll=function(){var a=this.getViewportSize();this.scrollerMoveCSS({x:Math.round(this.loggedPcentX*(this.el.clientWidth-a.w)),y:Math.round(this.loggedPcentY*(this.el.clientHeight-a.h))},0)},f.prototype.disable=function(){if(this.eventsActive){var a=this.getCSSMatrix(this.el);this.logPos(numOnly(a.e)-numOnly(this.container.scrollLeft),numOnly(a.f)-numOnly(this.container.scrollTop)),this.container.removeEventListener("touchstart",this,!1),this.container.removeEventListener("touchmove",this,!1),this.container.removeEventListener("touchend",this,!1),this.eventsActive=!1}},f.prototype.addPullToRefresh=function(a,b){b||(this.refresh=!0),this.refresh&&this.refresh===!0&&(this.coreAddPullToRefresh(a),this.el.style.overflow="visible")},f.prototype.hideScrollbars=function(){this.hscrollBar&&(this.hscrollBar.style.display="none",this.hscrollBar.style[a.feat.cssPrefix+"TransitionDuration"]="0ms"),this.vscrollBar&&(this.vscrollBar.style.display="none",this.vscrollBar.style[a.feat.cssPrefix+"TransitionDuration"]="0ms")},f.prototype.getViewportSize=function(){var a=window.getComputedStyle(this.container);return isNaN(numOnly(a.paddingTop))&&window.alert(typeof a.paddingTop+"::"+a.paddingTop+":"),{h:this.container.clientHeight>window.innerHeight?window.innerHeight:this.container.clientHeight-numOnly(a.paddingTop)-numOnly(a.paddingBottom),w:this.container.clientWidth>window.innerWidth?window.innerWidth:this.container.clientWidth-numOnly(a.paddingLeft)-numOnly(a.paddingRight)}},f.prototype.onTouchStart=function(b){if(this.moved=!1,this.currentScrollingObject=null,a(this.el).animate().stop(),this.container&&(this.refreshCancelCB&&(clearTimeout(this.refreshCancelCB),this.refreshCancelCB=null),this.scrollingFinishCB&&(clearTimeout(this.scrollingFinishCB),this.scrollingFinishCB=null),1===b.touches.length&&!this.boolScrollLock)){if(b.touches[0].target&&void 0!==b.touches[0].target.type){var c=b.touches[0].target.tagName.toLowerCase();if("select"===c)return}var d={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0};this.elementInfo={};var e=this.getViewportSize();this.elementInfo.bottomMargin=e.h,this.elementInfo.maxTop=this.el.clientHeight-this.elementInfo.bottomMargin,this.elementInfo.maxTop<0&&(this.elementInfo.maxTop=0),this.elementInfo.divHeight=this.el.clientHeight,this.elementInfo.rightMargin=e.w,this.elementInfo.maxLeft=this.el.clientWidth-this.elementInfo.rightMargin,this.elementInfo.maxLeft<0&&(this.elementInfo.maxLeft=0),this.elementInfo.divWidth=this.el.clientWidth,this.elementInfo.hasVertScroll=this.verticalScroll||this.elementInfo.maxTop>0,this.elementInfo.hasHorScroll=this.elementInfo.maxLeft>0,this.elementInfo.requiresVScrollBar=this.vscrollBar&&this.elementInfo.hasVertScroll,this.elementInfo.requiresHScrollBar=this.hscrollBar&&this.elementInfo.hasHorScroll,this.saveEventInfo(b),this.saveFirstEventInfo(b);var f=this.getCSSMatrix(this.el);d.top=numOnly(f.f)-numOnly(this.container.scrollTop),d.left=numOnly(f.e)-numOnly(this.container.scrollLeft),this.container.scrollTop=this.container.scrollLeft=0,this.currentScrollingObject=this.el,this.refresh&&0===d.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):d.top<0&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden")),d.x=d.left,d.y=d.top,this.setVScrollBar(d,0,0)&&(this.vscrollBar.style.right=this.container.clientWidth>window.innerWidth?"0px":"0px",this.vscrollBar.style[a.feat.cssPrefix+"Transition"]="",a(this.vscrollBar).animate().stop()),this.setHScrollBar(d,0,0)&&(this.container.clientHeight>window.innerHeight?this.hscrollBar.style.top=window.innerHeight-numOnly(this.hscrollBar.style.height)+"px":this.hscrollBar.style.bottom=numOnly(this.hscrollBar.style.height),this.hscrollBar.style[a.feat.cssPrefix+"Transition"]="",a(this.hscrollBar).animate().stop()),this.lastScrollInfo=d,this.hasMoved=!1,0===this.elementInfo.maxTop&&0===this.elementInfo.maxLeft&&this.lockBounce?this.scrollToTop(0):this.scrollerMoveCSS(this.lastScrollInfo,0),this.scrollerMoveCSS(this.lastScrollInfo,0)}},f.prototype.getCSSMatrix=function(b){if(this.androidFormsMode){var c=parseInt(b.style.marginTop,10),d=parseInt(b.style.marginLeft,10);return isNaN(c)&&(c=0),isNaN(d)&&(d=0),{f:c,e:d}}var e=a.getCssMatrix(b);return e},f.prototype.saveEventInfo=function(a){this.lastEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}},f.prototype.saveFirstEventInfo=function(a){this.firstEventInfo={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:a.timeStamp}},f.prototype.setVScrollBar=function(a,b,c){if(!this.elementInfo.requiresVScrollBar)return!1;var d=parseFloat(this.elementInfo.bottomMargin/this.elementInfo.divHeight)*this.elementInfo.bottomMargin+"px";numOnly(d)>this.elementInfo.bottomMargin&&(d=this.elementInfo.bottomMargin+"px"),d!==this.vscrollBar.style.height&&(this.vscrollBar.style.height=d);var e=this.elementInfo.bottomMargin-numOnly(this.vscrollBar.style.height)-(this.elementInfo.maxTop+a.y)/this.elementInfo.maxTop*(this.elementInfo.bottomMargin-numOnly(this.vscrollBar.style.height));return e>this.elementInfo.bottomMargin&&(e=this.elementInfo.bottomMargin),0>e&&(e=0),this.scrollbarMoveCSS(this.vscrollBar,{x:0,y:e},b,c),!0},f.prototype.setHScrollBar=function(a,b,c){if(!this.elementInfo.requiresHScrollBar)return!1;var d=parseFloat(this.elementInfo.rightMargin/this.elementInfo.divWidth)*this.elementInfo.rightMargin+"px";d!==this.hscrollBar.style.width&&(this.hscrollBar.style.width=d);var e=this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width)-(this.elementInfo.maxLeft+a.x)/this.elementInfo.maxLeft*(this.elementInfo.rightMargin-numOnly(this.hscrollBar.style.width));return e>this.elementInfo.rightMargin&&(e=this.elementInfo.rightMargin),0>e&&(e=0),this.scrollbarMoveCSS(this.hscrollBar,{x:e,y:0},b,c),!0},f.prototype.onTouchMove=function(b){if(null!==this.currentScrollingObject){var c=this.calculateMovement(b);this.calculateTarget(c),this.lastScrollInfo=c,this.moved||(a.trigger(this,"scrollstart",[this.el,{x:this.lastScrollInfo.top,y:this.lastScrollInfo.left}]),a.trigger(a.touchLayer,"scrollstart",[this.el,{x:this.lastScrollInfo.top,y:this.lastScrollInfo.left}]),this.elementInfo.requiresVScrollBar&&(this.vscrollBar.style.display="block"),this.elementInfo.requiresHScrollBar&&(this.hscrollBar.style.display="block")),this.moved=!0,this.refresh&&0===c.top?(this.refreshContainer.style.display="block",this.refreshHeight=this.refreshContainer.firstChild.clientHeight,this.refreshContainer.firstChild.style.top=-this.refreshHeight+"px",this.refreshContainer.style.overflow="visible",this.preventPullToRefresh=!1):c.top<0&&(this.preventPullToRefresh=!0,this.refresh&&(this.refreshContainer.style.overflow="hidden")),this.saveEventInfo(b),this.isScrolling===!1&&(this.isScrolling=!0,this.onScrollStart&&this.onScrollStart());var d=this.getCSSMatrix(this.el);this.lastScrollInfo.top=numOnly(d.f),this.lastScrollInfo.left=numOnly(d.e),this.recalculateDeltaY(this.lastScrollInfo),this.recalculateDeltaX(this.lastScrollInfo),this.checkYboundary(this.lastScrollInfo),this.elementInfo.hasHorScroll&&this.checkXboundary(this.lastScrollInfo);var e,f,g,h=this.lastScrollInfo.y>0&&this.lastScrollInfo.deltaY>0,i=this.lastScrollInfo.y<-this.elementInfo.maxTop&&this.lastScrollInfo.deltaY<0;
if(h||i){e=h?this.lastScrollInfo.y:-this.lastScrollInfo.y-this.elementInfo.maxTop,f=(this.container.clientHeight-e)/this.container.clientHeight,.5>f&&(f=.5),g=0,h&&this.lastScrollInfo.top>0||i&&this.lastScrollInfo.top<-this.elementInfo.maxTop?g=this.lastScrollInfo.top:i&&(g=-this.elementInfo.maxTop);var j=this.lastScrollInfo.deltaY*f,k=Math.abs(this.lastScrollInfo.deltaY*f);1>k&&(j=h?1:-1),this.lastScrollInfo.y=g+j}if(this.elementInfo.hasHorScroll&&(h=this.lastScrollInfo.x>0&&this.lastScrollInfo.deltaX>0,i=this.lastScrollInfo.x<-this.elementInfo.maxLeft&&this.lastScrollInfo.deltaX<0,h||i)){e=h?this.lastScrollInfo.x:-this.lastScrollInfo.x-this.elementInfo.maxLeft,f=(this.container.clientWidth-e)/this.container.clientWidth,.5>f&&(f=.5),g=0,h&&this.lastScrollInfo.left>0||i&&this.lastScrollInfo.left<-this.elementInfo.maxLeft?g=this.lastScrollInfo.left:i&&(g=-this.elementInfo.maxLeft);var l=this.lastScrollInfo.deltaX*f,m=Math.abs(this.lastScrollInfo.deltaX*f);1>m&&(l=h?1:-1),this.lastScrollInfo.x=g+l}(this.lockBounce||!this.refresh)&&(this.lastScrollInfo.x>0?this.lastScrollInfo.x=0:-1*this.lastScrollInfo.x>this.elementInfo.maxLeft&&(this.lastScrollInfo.x=-1*this.elementInfo.maxLeft),this.lastScrollInfo.y>0?this.lastScrollInfo.y=0:-1*this.lastScrollInfo.y>this.elementInfo.maxTop&&(this.lastScrollInfo.y=-1*this.elementInfo.maxTop)),this.scrollerMoveCSS(this.lastScrollInfo,0),this.setVScrollBar(this.lastScrollInfo,0,0),this.setHScrollBar(this.lastScrollInfo,0,0),this.refresh&&!this.preventPullToRefresh&&(!this.refreshTriggered&&this.lastScrollInfo.top>this.refreshHeight?(this.refreshTriggered=!0,this.setRefreshContent("Release to Refresh"),a.trigger(this,"refresh-trigger")):this.refreshTriggered&&this.lastScrollInfo.top<this.refreshHeight&&(this.refreshTriggered=!1,this.setRefreshContent("Pull to Refresh"),a.trigger(this,"refresh-cancel"))),this.infinite&&!this.infiniteTriggered&&Math.abs(this.lastScrollInfo.top)>this.el.clientHeight-this.container.clientHeight&&(this.infiniteTriggered=!0,a.trigger(this,"infinite-scroll"))}},f.prototype.calculateMovement=function(a,b){var c={top:0,left:0,speedY:0,speedX:0,absSpeedY:0,absSpeedX:0,deltaY:0,deltaX:0,absDeltaY:0,absDeltaX:0,y:0,x:0,duration:0},d=b?this.firstEventInfo:this.lastEventInfo,e=b?a.pageX:a.touches[0].pageX,f=b?a.pageY:a.touches[0].pageY,g=b?a.time:a.timeStamp;return c.deltaY=this.elementInfo.hasVertScroll?f-d.pageY:0,c.deltaX=this.elementInfo.hasHorScroll?e-d.pageX:0,c.time=g,c.duration=g-d.time,c},f.prototype.calculateTarget=function(a){a.y=this.lastScrollInfo.y+a.deltaY,a.x=this.lastScrollInfo.x+a.deltaX,Math.abs(a.deltaY)>0&&(a.y+=(a.deltaY>0?1:-1)*this.elementInfo.divHeight*this.androidPerfHack),Math.abs(a.deltaX)>0&&(a.x+=(a.deltaX>0?1:-1)*this.elementInfo.divWidth*this.androidPerfHack)},f.prototype.checkYboundary=function(a){var b=this.container.clientHeight/2,c=this.elementInfo.maxTop+b;if(a.y>b)a.y=b;else{if(!(-a.y>c))return;a.y=-c}this.recalculateDeltaY(a)},f.prototype.checkXboundary=function(a){var b=this.container.clientWidth/2,c=this.elementInfo.maxLeft+b;if(a.x>b)a.x=b;else{if(!(-a.x>c))return;a.x=-c}this.recalculateDeltaX(a)},f.prototype.recalculateDeltaY=function(a){var b=Math.abs(a.deltaY);a.deltaY=a.y-a.top;var c=Math.abs(a.deltaY);a.duration=a.duration*c/b},f.prototype.recalculateDeltaX=function(a){var b=Math.abs(a.deltaX);a.deltaX=a.x-a.left;var c=Math.abs(a.deltaX);a.duration=a.duration*c/b},f.prototype.hideRefresh=function(b){var c=this;if(!this.preventHideRefresh){var e=function(){c.setRefreshContent("Pull to Refresh"),a.trigger(c,"refresh-finish")};this.scrollerMoveCSS({x:0,y:0},d),b!==!1&&c.afEl.css3Animate?c.afEl.css3Animate({time:d+"ms",complete:e}):e(),this.refreshTriggered=!1}},f.prototype.setMomentum=function(a){var b=8e-4;a.speedY=this.divide(a.deltaY,a.duration),a.speedX=this.divide(a.deltaX,a.duration),a.absSpeedY=Math.abs(a.speedY),a.absSpeedX=Math.abs(a.speedX),a.absDeltaY=Math.abs(a.deltaY),a.absDeltaX=Math.abs(a.deltaX),a.absDeltaY>0?(a.deltaY+=(a.deltaY<0?-1:1)*a.absSpeedY*a.absSpeedY/(2*b),a.absDeltaY=Math.abs(a.deltaY),a.duration=a.absSpeedY/b,a.speedY=a.deltaY/a.duration,a.absSpeedY=Math.abs(a.speedY),(a.absSpeedY<100*b||a.absDeltaY<5)&&(a.deltaY=a.absDeltaY=a.duration=a.speedY=a.absSpeedY=0)):a.absDeltaX?(a.deltaX+=(a.deltaX<0?-1:1)*a.absSpeedX*a.absSpeedX/(2*b),a.absDeltaX=Math.abs(a.deltaX),a.duration=a.absSpeedX/b,a.speedX=a.deltaX/a.duration,a.absSpeedX=Math.abs(a.speedX),(a.absSpeedX<100*b||a.absDeltaX<5)&&(a.deltaX=a.absDeltaX=a.duration=a.speedX=a.absSpeedX=0)):a.duration=0},f.prototype.onTouchEnd=function(){if(null!==this.currentScrollingObject&&this.moved){this.finishScrollingObject=this.currentScrollingObject,this.currentScrollingObject=null;var b=this.calculateMovement(this.lastEventInfo,!0);this.androidFormsMode||this.setMomentum(b),this.calculateTarget(b);var c=this.getCSSMatrix(this.el);b.top=numOnly(c.f),b.left=numOnly(c.e),this.checkYboundary(b),this.elementInfo.hasHorScroll&&this.checkXboundary(b);var e=!this.preventPullToRefresh&&(b.top>this.refreshHeight||b.y>this.refreshHeight);if(this.fireRefreshRelease(e,b.top>0),this.refresh&&e?(b.y=this.refreshHeight,b.duration=d):b.y>=0?(b.y=0,b.top>=0&&(b.duration=d)):(-b.y>this.elementInfo.maxTop||0===this.elementInfo.maxTop)&&(b.y=-this.elementInfo.maxTop,-b.top>this.elementInfo.maxTop&&(b.duration=d)),this.elementInfo.hasHorScroll&&(b.x>=0?(b.x=0,b.left>=0&&this.refresh&&(b.duration=d)):(-b.x>this.elementInfo.maxLeft||0===this.elementInfo.maxLeft)&&(b.x=-this.elementInfo.maxLeft,-b.left>this.elementInfo.maxLeft&&this.refresh&&(b.duration=d))),(b.x===b.left&&b.y===b.top||this.androidFormsMode)&&(b.duration=0),this.scrollerMoveCSS(b,b.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setVScrollBar(b,b.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setHScrollBar(b,b.duration,"cubic-bezier(0.33,0.66,0.66,1)"),this.setFinishCalback(b.duration),this.infinite&&!this.infiniteTriggered&&Math.abs(b.y)>=this.el.clientHeight-this.container.clientHeight){var f=this;setTimeout(function(){f.infiniteTriggered=!0,a.trigger(f,"infinite-scroll")},b.duration-50)}}},f.prototype.setFinishCalback=function(b){var c=this;this.scrollingFinishCB=setTimeout(function(){c.hideScrollbars(),a.trigger(a.touchLayer,"scrollend",[c.el]),a.trigger(c,"scrollend",[c.el]),c.isScrolling=!1,c.elementInfo=null,c.infinite&&c.infiniteTriggered&&a.trigger(c,"infinite-scroll-end")},b)},f.prototype.startFormsMode=function(){if(!this.blockFormsFix){var b=this.getCSSMatrix(this.el);this.refreshSafeKeep=this.refresh,this.refresh=!1,this.androidFormsMode=!0,this.el.style[a.feat.cssPrefix+"Transform"]="none",this.el.style[a.feat.cssPrefix+"Transition"]="none",this.el.style[a.feat.cssPrefix+"Perspective"]="none",this.scrollerMoveCSS({x:numOnly(b.e),y:numOnly(b.f)},0),this.container.style[a.feat.cssPrefix+"Perspective"]="none",this.container.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible",this.vscrollBar&&(this.vscrollBar.style[a.feat.cssPrefix+"Transform"]="none",this.vscrollBar.style[a.feat.cssPrefix+"Transition"]="none",this.vscrollBar.style[a.feat.cssPrefix+"Perspective"]="none",this.vscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible"),this.hscrollBar&&(this.hscrollBar.style[a.feat.cssPrefix+"Transform"]="none",this.hscrollBar.style[a.feat.cssPrefix+"Transition"]="none",this.hscrollBar.style[a.feat.cssPrefix+"Perspective"]="none",this.hscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="visible")}},f.prototype.stopFormsMode=function(){if(!this.blockFormsFix){var b=this.getCSSMatrix(this.el);this.refresh=this.refreshSafeKeep,this.androidFormsMode=!1,this.el.style[a.feat.cssPrefix+"Perspective"]=1e3,this.el.style.marginTop=0,this.el.style.marginLeft=0,this.el.style[a.feat.cssPrefix+"Transition"]="0ms linear",this.scrollerMoveCSS({x:numOnly(b.e),y:numOnly(b.f)},0),this.container.style[a.feat.cssPrefix+"Perspective"]=1e3,this.container.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden",this.vscrollBar&&(this.vscrollBar.style[a.feat.cssPrefix+"Perspective"]=1e3,this.vscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden"),this.hscrollBar&&(this.hscrollBar.style[a.feat.cssPrefix+"Perspective"]=1e3,this.hscrollBar.style[a.feat.cssPrefix+"BackfaceVisibility"]="hidden")}},f.prototype.scrollerMoveCSS=function(b,c,d){c||(c=0),d||(d="linear"),c=numOnly(c);var e=this;if(this.el&&this.el.style){if(this.eventsActive)if(this.androidFormsMode)this.el.style.marginTop=Math.round(b.y)+"px",this.el.style.marginLeft=Math.round(b.x)+"px";else{var f={x:b.x,y:b.y,duration:c,easing:"easeOutSine"};e.initScrollProgress&&(f.update=function(b){a.trigger(e,"scroll",[b]),a.trigger(a.touchLayer,"scroll",[b])}),a(this.el).animate(f).start()}this.logPos(b.x,b.y)}},f.prototype.logPos=function(a,b){var c;c=this.elementInfo?{h:this.elementInfo.bottomMargin,w:this.elementInfo.rightMargin}:this.getViewportSize(),this.loggedPcentX=this.divide(a,this.el.clientWidth-c.w),this.loggedPcentY=this.divide(b,this.el.clientHeight-c.h),this.scrollTop=b,this.scrollLeft=a},f.prototype.scrollbarMoveCSS=function(b,c,d,e){d||(d=0),e||(e="linear"),b&&b.style&&(this.androidFormsMode?(b.style.marginTop=Math.round(c.y)+"px",b.style.marginLeft=Math.round(c.x)+"px"):a(b).animate({x:c.x,y:c.y,duration:d,easing:"easeOutSine"}).start())},f.prototype.scrollTo=function(a,b){b||(b=0),this.scrollerMoveCSS(a,b)},f.prototype.scrollBy=function(a,b){var c=this.getCSSMatrix(this.el),d=numOnly(c.f),e=numOnly(c.e);this.scrollTo({y:d-a.y,x:e-a.x},b)},f.prototype.scrollToBottom=function(a){this.scrollTo({y:-1*(this.el.clientHeight-this.container.clientHeight),x:0},a)},f.prototype.scrollToTop=function(a){this.scrollTo({x:0,y:0},a)},i}()}(af),function(a){"use strict";function b(a){return"tagName"in a?a:a.parentNode}function c(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function d(){g.last&&Date.now()-g.last>=h&&(g.el.trigger("longTap"),g={})}var e,f,g={},h=750;a(document).ready(function(){var i;a(document.body).bind("touchstart",function(c){if(c.originalEvent&&(c=c.originalEvent),c.touches&&0!==c.touches.length){var j=Date.now(),k=j-(g.last||j);c.touches&&0!==c.touches.length&&(g.el=a(b(c.touches[0].target)),e&&clearTimeout(e),g.x1=c.touches[0].pageX,g.y1=c.touches[0].pageY,g.x2=g.y2=0,k>0&&250>=k&&(g.isDoubleTap=!0),g.last=j,f=setTimeout(d,h),a.ui.useAutoPressed&&!g.el.data("ignore-pressed")&&g.el.addClass("pressed"),i&&a.ui.useAutoPressed&&!i.data("ignore-pressed")&&i[0]!==g.el[0]&&i.removeClass("pressed"),i=g.el)}}).bind("touchmove",function(a){a.originalEvent&&(a=a.originalEvent),g.x2=a.touches[0].pageX,g.y2=a.touches[0].pageY,clearTimeout(f)}).bind("touchend",function(b){b.originalEvent&&(b=b.originalEvent),g.el&&(a.ui.useAutoPressed&&!g.el.data("ignore-pressed")&&g.el.removeClass("pressed"),g.isDoubleTap?(g.el.trigger("doubleTap"),g={}):g.x2>0||g.y2>0?((Math.abs(g.x1-g.x2)>30||Math.abs(g.y1-g.y2)>30)&&g.el.trigger("swipe")&&g.el.trigger("swipe"+c(g.x1,g.x2,g.y1,g.y2)),g.x1=g.x2=g.y1=g.y2=g.last=0):"last"in g&&(g.el.trigger("tap"),e=setTimeout(function(){e=null,g.el&&g.el.trigger("singleTap"),g={}},250)))}).bind("touchcancel",function(){g.el&&a.ui.useAutoPressed&&!g.el.data("ignore-pressed")&&g.el.removeClass("pressed"),g={},clearTimeout(f)})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(af),function(a){"use strict";a.touchLayer=function(b){return a.touchLayer=new l(b),a.touchLayer};var b=["input","select","textarea"],c=["button","radio","checkbox","range","date"],d=a.os.ios,e=a.os.blackberry,f=a.os.blackberry||a.os.fennec||a.os.android&&!a.os.chrome,g=a.os.ios&&!a.os.ios7,h=.97,i=2,j=!1,k=!1,l=function(b){this.clearTouchVars(),b.addEventListener("touchstart",this,!1),b.addEventListener("touchmove",this,!1),b.addEventListener("touchend",this,!1),b.addEventListener("click",this,!1),b.addEventListener("focusin",this,!1),document.addEventListener("scroll",this,!1),window.addEventListener("resize",this,!1),window.addEventListener("orientationchange",this,!1),this.layer=b,this.scrollEndedProxy_=a.proxy(this.scrollEnded,this),this.exitEditProxy_=a.proxy(this.exitExit,this,[]),this.launchFixUIProxy_=a.proxy(this.launchFixUI,this);var c=this;this.scrollTimeoutExpireProxy_=function(){c.scrollTimeout_=null,c.scrollTimeoutEl_.addEventListener("scroll",c.scrollEndedProxy_,!1)},this.retestAndFixUIProxy_=function(){a.os.android&&!a.os.chrome&&(c.layer.style.height="100%"),a.asap(c.testAndFixUI,c,arguments)},document.addEventListener("click",function(a){return k?(a.preventDefault(),a.stopPropagation(),!1):void(void 0!==a.clientX&&null!==c.lastTouchStartX&&2>Math.abs(c.lastTouchStartX-a.clientX)&&2>Math.abs(c.lastTouchStartY-a.clientY)&&(a.preventDefault(),a.stopPropagation()))},!0),a.bind(this,"scrollstart",function(b){c.isScrolling=!0,c.scrollingEl_=b,a.feat.nativeTouchScroll||(c.scrollerIsScrolling=!0),c.fireEvent("UIEvents","scrollstart",b,!1,!1)}),a.bind(this,"scrollend",function(b){c.isScrolling=!1,a.feat.nativeTouchScroll||(c.scrollerIsScrolling=!1),c.fireEvent("UIEvents","scrollend",b,!1,!1)}),this.hideAddressBar(0,1),this.launchFixUI(5)};l.prototype={dX:0,dY:0,cX:0,cY:0,touchStartX:null,touchStartY:null,layer:null,scrollingEl_:null,scrollTimeoutEl_:null,scrollTimeout_:null,reshapeTimeout_:null,scrollEndedProxy_:null,exitEditProxy_:null,launchFixUIProxy_:null,reHideAddressBarTimeout_:null,retestAndFixUIProxy_:null,panElementId:"header",blockClicks:!1,allowDocumentScroll_:!1,ignoreNextResize_:!1,blockPossibleClick_:!1,isScrolling:!1,isScrollingVertical_:!1,wasPanning_:!1,isPanning_:!1,isFocused_:!1,justBlurred_:!1,requiresNativeTap:!1,holdingReshapeType_:null,trackingClick:!1,scrollerIsScrolling:!1,handleEvent:function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchend":this.onTouchEnd(a);break;case"click":this.onClick(a);break;case"blur":this.onBlur(a);break;case"scroll":this.onScroll(a);break;case"orientationchange":this.onOrientationChange(a);break;case"resize":this.onResize(a);break;case"focusin":this.onFocusIn(a)}},launchFixUI:function(a){return a||(a=i),null===this.reHideAddressBarTimeout_?this.testAndFixUI(0,a):void 0},resetFixUI:function(){this.reHideAddressBarTimeout_&&clearTimeout(this.reHideAddressBarTimeout_),this.reHideAddressBarTimeout_=null},testAndFixUI:function(b,c){var d=this.getReferenceHeight(),e=this.getCurrentHeight();return d===e||d>e*h&&e>d*h?(a.os.android&&this.resetFixUI(),!1):(this.hideAddressBar(b,c),!0)},hideAddressBar:function(b,c){if(!a.ui||!a.ui.isIntel){if(b>=c)return void this.resetFixUI();if(a.os.desktop||a.os.kindle)this.layer.style.height="100%";else if(a.os.android){window.scrollTo(1,1),this.layer.style.height=this.isFocused_||window.innerHeight>=window.outerHeight?window.innerHeight+"px":window.outerHeight+"px";var d=this,e=b+1;this.reHideAddressBarTimeout_=setTimeout(d.retestAndFixUIProxy_,250*e,e,c)}else this.isFocused_||(document.documentElement.style.height="5000px",window.scrollTo(0,0),document.documentElement.style.height=window.innerHeight+"px",this.layer.style.height=window.innerHeight+"px")}},getReferenceHeight:function(){return window.innerHeight},getCurrentHeight:function(){return a.os.android?window.innerHeight:numOnly(document.documentElement.style.height)},onOrientationChange:function(){var b=this,c=!1;if(this.focusedElement&&(c=!0,this.focusedElement.blur()),!this.holdingReshapeType_&&this.reshapeTimeout_?this.fireReshapeEvent("orientationchange"):this.previewReshapeEvent("orientationchange"),a.os.android&&a.os.chrome){this.layer.style.height="100%";var d=c?600:0;setTimeout(function(){b.hideAddressBar(0,1)},d)}},onResize:function(){return this.ignoreNextResize_?void(this.ignoreNextResize_=!1):void(this.launchFixUI()&&this.reshapeAction())},onClick:function(e){var f=e.target&&void 0!==e.target.tagName?e.target.tagName.toLowerCase():"";if(-1===b.indexOf(f)||this.isFocused_&&e.target===this.focusedElement)a.os.blackberry10&&this.isFocused_&&this.focusedElement.blur();else{var g=e.target&&void 0!==e.target.type?e.target.type.toLowerCase():"",h=-1!==c.indexOf(g);if(h)this.isFocused_=!1;else{if(this.isFocused_&&this.focusedElement.removeEventListener("blur",this,!1),this.focusedElement=e.target,this.focusedElement.addEventListener("blur",this,!1),!this.isFocused_&&!this.justBlurred_)if(a.trigger(this,"enter-edit",[e.target]),a.os.ios){var i=this;setTimeout(function(){i.fireReshapeEvent("enter-edit")},300)}else this.previewReshapeEvent("enter-edit");this.isFocused_=!0}this.justBlurred_=!1,this.allowDocumentScroll_=!0,d&&e.target.focus()}},previewReshapeEvent:function(a){var b=this;this.reshapeTimeout_=setTimeout(function(){b.fireReshapeEvent(a),b.reshapeTimeout_=null,b.holdingReshapeType_=null},750),this.holdingReshapeType_=a},fireReshapeEvent:function(b){a.trigger(this,"reshape"),a.trigger(this,b?b+"-reshape":"unknown-reshape")},reshapeAction:function(){this.reshapeTimeout_?(clearTimeout(this.reshapeTimeout_),this.fireReshapeEvent(this.holdingReshapeType_),this.holdingReshapeType_=null,this.reshapeTimeout_=null):this.previewReshapeEvent()},onFocusIn:function(a){this.isFocused_||this.onClick(a)},onBlur:function(b){a.os.android&&b.target===window||(this.isFocused_=!1,this.focusedElement&&this.focusedElement.removeEventListener("blur",this,!1),this.focusedElement=null,this.justBlurred_=!0,a.asap(this.exitEditProxy_,this,[b.target]))},exitExit:function(b){if(this.justBlurred_=!1,!this.isFocused_)if(a.trigger(this,"exit-edit",[b]),this.allowDocumentScroll_=!1,a.os.ios){var c=this;setTimeout(function(){c.fireReshapeEvent("exit-edit")},300)}else this.previewReshapeEvent("exit-edit")},onScroll:function(a){this.allowDocumentScroll_||this.isPanning_||a.target!==document||(this.allowDocumentScroll_=!0,this.wasPanning_?(this.wasPanning_=!1,setTimeout(this.launchFixUIProxy_,2e3,[i])):this.launchFixUI())},onTouchStart:function(c){if(this.dX=c.touches[0].pageX,this.dY=c.touches[0].pageY,this.lastTimestamp=c.timeStamp,this.lastTouchStartX=this.lastTouchStartY=null,a.os.ios){if(j===c.touches[0].identifier)return k=!0,c.preventDefault(),j=!1,!1;j=c.touches[0].identifier,k=!1}if(this.scrollerIsScrolling)return this.moved=!0,this.scrollerIsScrolling=!1,c.preventDefault(),!1;this.trackingClick=!0,(g||a.feat.nativeTouchScroll)&&this.checkDOMTree(c.target,this.layer),this.isScrolling&&(null!==this.scrollTimeout_?(clearTimeout(this.scrollTimeout_),this.scrollTimeout_=null,this.scrollTimeoutEl_!==this.scrollingEl_?this.scrollEnded(!1):this.blockPossibleClick_=!0):this.scrollTimeoutEl_&&(this.scrollEnded(!0),this.blockPossibleClick_=!0));var d=a.os.android&&c&&c.target&&c.target.getAttribute&&"ignore"===c.target.getAttribute("data-touchlayer");if(d||this.isFocused_&&!a.os.blackberry10)this.requiresNativeTap=!0,this.allowDocumentScroll_=!0;else if(f&&c.target&&void 0!==c.target.tagName){var e=c.target.tagName.toLowerCase();-1!==b.indexOf(e)&&(this.requiresNativeTap=!0)}else c.target&&void 0!==c.target.tagName&&"input"===c.target.tagName.toLowerCase()&&"range"===c.target.type&&(this.requiresNativeTap=!0);a.os.chrome||a.os.fennec||(this.isPanning_||this.requiresNativeTap?this.isScrollingVertical_&&this.demandVerticalScroll():(this.isScrolling&&!a.feat.nativeTouchScroll||!this.isScrolling)&&c.preventDefault())},demandVerticalScroll:function(){var a=this.scrollingEl_.scrollTop<=0;if(a)this.scrollingEl_.scrollTop=1;else{var b=this.scrollingEl_.scrollTop+this.scrollingEl_.clientHeight,c=b>=this.scrollingEl_.scrollHeight;c&&(this.scrollingEl_.scrollTop=this.scrollingEl_.scrollHeight-this.scrollingEl_.clientHeight-1)}},ignoreScrolling:function(a){return void 0===a.scrollWidth||void 0===a.clientWidth?!0:void 0===a.scrollHeight||void 0===a.clientHeight?!0:!1},allowsVerticalScroll:function(a,b){var c=b.overflowY;return"scroll"===c?!0:"auto"===c&&a.scrollHeight>a.clientHeight?!0:!1},allowsHorizontalScroll:function(a,b){var c=b.overflowX;return"scroll"===c?!0:"auto"===c&&a.scrollWidth>a.clientWidth?!0:!1},checkDOMTree:function(b,c){if(g&&this.panElementId===b.id)return void(this.isPanning_=!0);if(a.feat.nativeTouchScroll){if(this.ignoreScrolling(b))return;var d=window.getComputedStyle(b);if(this.allowsVerticalScroll(b,d))return this.isScrollingVertical_=!0,this.scrollingEl_=b,void(this.isScrolling=!0);this.allowsHorizontalScroll(b,d)&&(this.isScrollingVertical_=!1,this.scrollingEl_=null,this.isScrolling=!0)}var e=b===c;!e&&b.parentNode&&this.checkDOMTree(b.parentNode,c)},scrollEnded:function(a){null!==this.scrollTimeoutEl_&&(a&&this.scrollTimeoutEl_.removeEventListener("scroll",this.scrollEndedProxy_,!1),this.fireEvent("UIEvents","scrollend",this.scrollTimeoutEl_,!1,!1),this.scrollTimeoutEl_=null)},onTouchMove:function(b){var c=this.moved;return this.moved=!0,e&&(this.cY=b.touches[0].pageY-this.dY,this.cX=b.touches[0].pageX-this.dX),this.isPanning_?void 0:(this.isScrolling&&(c||this.fireEvent("UIEvents","scrollstart",this.scrollingEl_,!1,!1),this.speedY=(this.lastY-b.touches[0].pageY)/(b.timeStamp-this.lastTimestamp),this.lastY=b.touches[0].pageY,this.lastX=b.touches[0].pageX,this.lastTimestamp=b.timeStamp),a.os.blackberry10?void 0:void(this.isScrolling&&a.feat.nativeTouchScroll||b.preventDefault()))},onTouchEnd:function(b){var c=this.moved;if(e&&(c=c&&!(Math.abs(this.cX)<10&&Math.abs(this.cY)<10)),a.os.ios&&this.requiresNativeTap||(this.allowDocumentScroll_=!1),this.isPanning_&&c)this.wasPanning_=!0;else if(c||this.requiresNativeTap)c&&(this.isScrolling&&(this.scrollTimeoutEl_=this.scrollingEl_,Math.abs(this.speedY)<.01?this.scrollEnded(!1):this.scrollTimeout_=setTimeout(this.scrollTimeoutExpireProxy_,30)),this.requiresNativeTap&&(this.isFocused_||a.trigger(this,"cancel-enter-edit",[b.target])));else{if(this.scrollerIsScrolling=!1,!this.trackingClick)return;if(b.preventDefault(),!this.blockClicks&&!this.blockPossibleClick_){var d=b.target,f=b.changedTouches?b.changedTouches[0]:b.touches[0];3===d.nodeType&&(d=d.parentNode),this.fireEvent("Event","click",d,!0,b.mouseToTouch,f[0]),this.lastTouchStartX=this.dX,this.lastTouchStartY=this.dY}}a.os.blackberry10&&(this.lastTouchStartX=this.dX,this.lastTouchStartY=this.dY),this.clearTouchVars()},clearTouchVars:function(){this.speedY=this.lastY=this.cY=this.cX=this.dX=this.dY=0,this.moved=!1,this.isPanning_=!1,this.isScrolling=!1,this.isScrollingVertical_=!1,this.requiresNativeTap=!1,this.blockPossibleClick_=!1,this.trackingClick=!1},fireEvent:function(b,c,d,e,f,g){var h=document.createEvent(b);h.initEvent(c,e,!0),g&&a.each(g,function(a,b){h.key=b}),f&&(h.mouseToTouch=!0),d.dispatchEvent(h)}}}(af);